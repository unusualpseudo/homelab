# Setting up an External Drive in Ubuntu for NFS with ZFS

I setup an external 2.5T HDD drive for NFS upon ZFS, below the steps :

```sh
fdisk -l
zpool create -o ashift=12 -f nfs-pool /dev/sda
zfs set atime=off nfs-pool
zfs set compression=lz4 nfs-pool
zfs create nfs-pool/Apps
zfs create nfs-pool/Apps/MinioIO
zfs create nfs-pool/Apps/Longhorn
zfs set sharenfs="no_subtree_check,all_squash,anonuid=120,anongid=120,rw=@192.168.1.0/24" \
nfs-pool/Apps/MinioIO
zfs set sharenfs="no_subtree_check,all_squash,anonuid=120,anongid=120,rw=@192.168.1.0/24" \
nfs-pool/Apps/Longhorn
chown 120:120 -R /nfs-pool/Apps/Longhorn
chmod 777 -R /nfs-pool/Apps/Longhorn
chown 120:120 -R /nfs-pool/Apps/MinioIO
chmod 777 -R /nfs-pool/Apps/MinioIO
```

[Reference](https://github.com/onedr0p/home-ops/blob/main/docs/src/notes/nas.md)
